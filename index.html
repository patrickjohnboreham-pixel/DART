<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DART (alpha)</title>
<link rel="manifest" href="manifest.json?v=4">
<meta name="theme-color" content="#0b5fff">

<link rel="stylesheet" href="assets/css/dart.css?v=5">

</head>
<body>
<!-- Banner -->
<div id="banner">
  <h1>Defect Assessment and Reporting Tool</h1>
  <h2>DART</h2>
</div>


<!-- Tab Buttons -->
<div class="tabbar">
  <button type="button" class="tablink active" data-tab="home">Home</button>
  <button type="button" class="tablink" data-tab="measurements">Vehicle Measurements</button>
  <button type="button" class="tablink" data-tab="inspection">Inspection</button>
  <button type="button" class="tablink" data-tab="askDart">Ask DART</button>
  <button type="button" class="tablink" data-tab="photos">Vehicle Photos</button>
  <button type="button" class="tablink" data-tab="results">Results</button>
  <button type="button" class="tablink" data-tab="help">Help</button>
</div>


<!-- Home Tab -->
<div id="home" class="tab-content active">


  <!-- Quick Links -->
  <h3>Quick Links</h3>
<div class="link-buttons">
  <a href="https://www.rover.infrastructure.gov.au/RAVPublicSearch/" target="_blank" rel="noopener">
    RAV Search (Post 2021)
  </a>
  <a href="https://myrta.com/rvd/searchRVD.do?submitValue=start" target="_blank" rel="noopener">
    RVD (1999–2001)
  </a>
  <a href="https://www.myrta.com/myrta/applications/rvd/rvd-pre1999/index.htm" target="_blank" rel="noopener">
    RVD (Pre 1999)
  </a>
</div>



  <h3>Vehicle Details</h3>
  <p><em>Enter the details of the inspected vehicle.</em></p>

  <label>Registration:</label>
  <input type="text" id="rego" placeholder="e.g. SIK4X4"><br>

  <label>Make:</label>
  <input type="text" id="make" placeholder="e.g. Toyota"><br>

  <label>Model:</label>
  <input type="text" id="model" placeholder="e.g. Yaris"><br>

  <label>Year:</label>
  <input type="number" id="year" placeholder="e.g. 2023"><br>

  <label>Approval Number:</label>
  <input type="text" id="approval" placeholder="e.g. 12345"><br>

  <!-- Engineering Mod Codes -->
  <h3>Engineering Mod Codes</h3>
  <p><em>Enter mod codes if applicable (e.g. LM1, LS10). Separate multiple codes with commas.</em></p>
 <input type="text" id="modCodes" placeholder="e.g. LM1, LS9, LS10">
  <button type="button" id="modCodeButton" class="action">Check Codes</button>
  <button type="button" id="modCodeClear" class="action action-secondary">
  Clear Codes
</button>


  <div id="modDescriptions" class="result"></div>

  <!-- RVD Measurements (Stock) -->
  <h3>Road Vehicle Descriptor (RVD) Measurements</h3>
  <p><em>Enter RVD measurements collected from the links provided above.</em></p>

  <h4>Suspension</h4>
  <p><em>Measurements taken from wheel center to lower guard.</em></p>

  <label>Front (stock/RVD):</label>
  <input type="number" id="suspensionFront" placeholder="e.g. 540"><br>

  <label>Rear (stock/RVD):</label>
  <input type="number" id="suspensionRear" placeholder="e.g. 550"><br>

  <h4>Wheel Track</h4>
  <p><em>Measurement centre of tyre to centre of tyre.</em></p>

  <label>Front:</label>
  <input type="number" id="trackFront" placeholder="e.g. 1620"><br>

  <label>Rear:</label>
  <input type="number" id="trackRear" placeholder="e.g. 1620"><br>

  <h4>Tyre Placard</h4>
<label>Tyre Size:</label>
<input type="number" id="tyreWidth" placeholder="265"> /
<input type="number" id="tyreAspect" placeholder="75"> R
<input type="number" id="tyreRim" placeholder="16"><br>

<!-- Save Details -->
<button type="button" class="action" onclick="saveVehicleDetails()">Save Details</button>
<p class="footer-note">
    This application was developed by TI P Boreham.  
    Enquiries and feedback: <a href="mailto:patrick.j.boreham@tmr.qld.gov.au">patrick.j.boreham@tmr.qld.gov.au</a>
</p>

<div id="vehicleSummary" class="summary"></div>


</div>

<!-- Vehicle Measurements Tab -->
<div id="measurements" class="tab-content">
  <p><em>Enter the measured (current) values you took on the vehicle today.</em></p>

  <!-- Suspension (measured) -->
  <div class="section">
    <h3>Suspension</h3>
    <p><em>Wheel centre → lower guard (mm)</em></p>

    <label>Front (measured):</label>
    <input type="number" id="measFront" placeholder="e.g. 560"> mm<br>

    <label>Rear (measured):</label>
    <input type="number" id="measRear" placeholder="e.g. 560"> mm
  </div>

  <!-- Wheel Track (measured) -->
  <div class="section section-spaced">
    <h3>Wheel Track</h3>
    <p><em>Centre of tyre to centre of tyre (mm)</em></p>

    <label>Front (measured):</label>
    <input type="number" id="measTrackFront" placeholder="e.g. 1660"> mm<br>

    <label>Rear (measured):</label>
    <input type="number" id="measTrackRear" placeholder="e.g. 1660"> mm
  </div>

  <!-- Tyres (measured tab, separate from Home) -->
  <div class="section section-spaced">
  <h3>Tyres</h3>
  <p><em>Enter measured tyre size. Accepts metric (e.g. 265/75R16) or imperial (e.g. 35/12.5R16).</em></p>

  <label>Tyre Size (measured):</label>
  <input type="text" id="m_tyreSize" placeholder="265/75R16 or 35/12.5R16">
  <div id="m_tyreParsed" class="result"></div>
</div>

  <!-- Action -->
  <button type="button" id="compileBtn" class="action">Calculate in results</button>
  <p class="small-note"><em>This will read the RVD “stock” numbers you entered on the Home tab (Suspension/Track) and compare with these measured values.</em></p>
</div>

<!-- Inspection Tab -->
<div id="inspection" class="tab-content">
  <h3>Inspection</h3>
  <p><em>Questions are optional.</em></p>

  <div class="section">
    <h4>Sway bar</h4>
    <p>Are any sway bar components broken, loose, unduly worn, disconnected, or removed?</p>

    <div>
      <button type="button" class="action" onclick="answerSwayBar(true)">Yes</button>
      <button type="button" class="action" onclick="answerSwayBar(false)">No</button>
    </div>

    <!-- Appears when you answer -->
    <div id="swayBarInfo" class="result"></div>
  </div>
</div>

<!-- Ask DART Tab -->
<div id="askDart" class="tab-content">
  <h2>Ask DART</h2>
  <p><em>Search Queensland Light Vehicle Inspection Manual</em></p>

  <input
  type="text"
  id="dartSearch"
  placeholder="Type a vehicle defect..."
/>

  <button type="button" class="action" onclick="searchQLVIM()">Search</button>

 <div id="searchResults"></div>
</div> <!-- /#askDart -->

<!-- Vehicle Photos Tab -->
<div id="photos" class="tab-content">
  <h3>Upload Vehicle Photos</h3>
  <p><em>Attach images of the inspected 4x4 vehicle (optional).</em></p>
  <input type="file" accept="image/*" capture="environment" multiple>
</div>


<!-- Results Tab -->
   
<div id="results" class="tab-content">
  <h3>Results</h3>
  <!-- Save as PDF -->
<button type="button" class="action" onclick="saveReportPDF()">Save Report as PDF</button>

<!-- (Optional) include photos note -->
<div class="photo-note">
  Photos attached on the “Vehicle Photos” tab will be included.
</div>


<!-- Where photos will be shown in the Results before printing -->
<div id="resultsPhotos" class="summary"></div>

  <div id="resultsKey" class="result">
    <strong><span class="status-ok">Compliant</span></strong> - No issues detected. &nbsp; | &nbsp; 
    <strong><span class="status-bad">Defective</span></strong> - Non-compliant, rectification required.
</div>


    <!-- Saved Vehicle Summary (from Home) -->
  <div id="resultsVehicleSummary" class="summary"></div>
  <div id="frontResult" class="result"></div>
  <div id="rearResult" class="result"></div>
  <div id="summary" class="summary"></div>

  <!-- Wheel Track warning (only shows if >50mm) -->
  <div id="trackAlert" class="result"></div>

  <!-- Inspection findings -->
  <div id="inspectionResults" class="result"></div>

  <!-- Tyre Diameter warning (only shows if >50mm increase) -->
  <div id="tyreDiaAlert" class="result"></div>

</div>

<!-- Help Tab -->
<div id="help" class="tab-content">
  <h3>Help</h3>
  <p><em>Tap an image to view it full size in a new tab.</em></p>

  <div class="help-grid">
    <a href="Help/helpphoto1.jpg" target="_blank" rel="noopener" class="action">Tyre Diameter</a>
    <a href="Help/helpphoto2.jpg" target="_blank" rel="noopener" class="action">Sway Bar</a>
    <a href="Help/helpphoto3.jpg" target="_blank" rel="noopener" class="action">Wheel Track</a>
    <a href="Help/helpphoto4.jpg" target="_blank" rel="noopener" class="action">Suspension Height</a>
    <a href="Help/helpphoto5.jpg" target="_blank" rel="noopener" class="action">Body Blocks</a>
  </div>
<h4 style="margin-top:20px;">Reference Documents</h4>
  <p><em>Tap a link to open in a new tab.</em></p>
  <div class="help-grid">
    <a href="assets/QLVIM.pdf" target="_blank" rel="noopener" class="action">Queensland Light Vehicle Inspection Manual (QLVIM PDF)</a>
  </div>
</div> <!-- /#help -->

<script src="assets/js/app.js?v=8" defer></script>
</body>
</html>
